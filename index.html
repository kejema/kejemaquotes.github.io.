<!DOCTYPE html>
<html>
<head>
    <title>OpenAI Chat</title>
    <style>
        .container {
            width: 500px;
            margin: 0 auto;
            padding: 20px;
            border: 1px solid #ccc;
            font-family: Arial, sans-serif;
        }

        .message-container {
            margin-bottom: 10px;
        }

        .user-message {
            background-color: #e6f7ff;
        }

        .ai-message {
            background-color: #f0f0f0;
        }

        .input-container {
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>OpenAI Chat</h1>
        <div id="conversation-container"></div>
        <div class="input-container">
            <input type="text" id="message-input" placeholder="Type your message" />
            <button onclick="sendMessage()">Send</button>
            <button onclick="clearConversation()">Clear</button>
        </div>
    </div>

    <script>
        const apiKey = 'YOUR_API_KEY';
        const baseUrl = 'https://api.openai.com/v1/chat/completions';

        let conversation = [];

        async function sendMessage() {
            const messageInput = document.getElementById('message-input');
            const message = messageInput.value.trim();

            if (message !== '') {
                conversation.push({
                    role: 'user',
                    content: message
                });

                renderMessage('user', message);

                messageInput.value = '';

                const response = await fetch(baseUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        messages: conversation
                    })
                });

                const { choices } = await response.json();

                const reply = choices[0].message.content;

                conversation.push({
                    role: 'ai',
                    content: reply
                });

                renderMessage('ai', reply);
            }
        }

        function clearConversation() {
            conversation = [];
            document.getElementById('conversation-container').innerHTML = '';
        }

        async function startConversation() {
            conversation.push({
                role: 'system',
                content: 'You have initiated a new conversation.'
            });

            renderMessage('system', 'You have initiated a new conversation.');

            const response = await fetch(baseUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    messages: conversation
                })
            });

            const { choices } = await response.json();

            const reply = choices[0].message.content;

            conversation.push({
                role: 'ai',
                content: reply
            });

            renderMessage('ai', reply);
        }

        function renderMessage(role, content) {
            const container = document.getElementById('conversation-container');
            const messageContainer = document.createElement('div');
            const messageClass = role === 'user' ? 'user-message' : (role === 'ai' ? 'ai-message' : 'system-message');

            messageContainer.className = `message-container ${messageClass}`;
            messageContainer.innerText = content;

            container.appendChild(messageContainer);
        }

        // Start the conversation when the page loads
        window.onload = startConversation;
    </script>
</body>
</html>


